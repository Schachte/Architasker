{% load static %}
{% load staticfiles %}

<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	{% include 'css.html' %}
	{% include 'javascript.html' %}
	<link rel="icon" type="image/png" href="assets/img/favicon.ico">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <!-- Include Favicon -->
    <link rel="shortcut icon" href="{% static 'img/favicon.ico' %}" type="image/x-icon">
    <link rel="icon" href="{% static 'img/favicon.ico' %}" type="image/x-icon">

	<title>ArchiTasker - Week Planner Made Simple</title>

	<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
    <meta name="viewport" content="width=device-width" />


    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-7s5uDGW3AHqw6xtJmNNtr+OBRJUlgkNJEo78P4b0yRw= sha512-nNo+yCHEyn0smMxSswnf/OnX6/KwJuZTlNZBjauKhTK0c+zT+q5JOCx0UFhXQ6rJR9jg6Es8gPuD2uZcYDLqSw==" crossorigin="anonymous">

    <!-- Bootstrap core CSS     -->
    <link href="{% static 'css/DASHBOARD_CSS/bootstrap.min.css' %}" rel="stylesheet" />

    <!-- Animation library for notifications   -->
    <link href="{% static 'css/DASHBOARD_CSS/animate.min.css' %}" rel="stylesheet"/>

    <!--  Light Bootstrap Table core CSS    -->
    <link href="{% static 'css/DASHBOARD_CSS/light-bootstrap-dashboard.css' %}" rel="stylesheet"/>


    <!--  CSS for Demo Purpose, don't include it in your project     -->
    <link href="{% static 'css/DASHBOARD_CSS/demo.css' %}" rel="stylesheet" />


    <!--     Fonts and icons     -->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link href='http://fonts.googleapis.com/css?family=Roboto:400,700,300' rel='stylesheet' type='text/css'>
    <link href="{% static 'css/DASHBOARD_CSS/pe-icon-7-stroke.css' %}" rel="stylesheet" />


		<script type="text/javascript" charset="utf-8">


            function stringEscape(s) {
                return s ? s.replace(/\\/g,'\\\\').replace(/\n/g,'\\n').replace(/\t/g,'\\t').replace(/\v/g,'\\v').replace(/'/g,"\\'").replace(/"/g,'\\"').replace(/[\x00-\x1F\x80-\x9F]/g,hex) : s;
                function hex(c) { var v = '0'+c.charCodeAt(0).toString(16); return '\\x'+v.substr(v.length-2); }
            }

			function init() {

                var open_modal_google = function(id, event_color, start, end) {
                    $("#modal_title").html("Google Event Name: <font color=\"" + event_color +"\"><b>" + scheduler.getEvent(id).text + "</b></font>");
                    $("#start_time").html("Start Time: <b>" + start + "</b>");
                    $("#end_time").html("End Time: <b>" + end + "</b>");
                    $('#mymodal').modal('show');
                }

				google_ids = [];

				var currently_selected_id = "";
				var current_view = 0;
				var prev_button = document.getElementsByClassName('dhx_cal_prev_button');
				var next_button = document.getElementsByClassName('dhx_cal_next_button');
				next_button[0].style.visibility='hidden';

				// HANDLE PREVIOUS EVENTS
				for (var i = 0; i < prev_button.length; i++) {
						prev_button[i].addEventListener('click', function() {
								current_view-=1;
								if (current_view > 0) {
									next_button[0].style.visibility='hidden';
								}
								else {
									next_button[0].style.visibility='visible';
								}
						});
				}
				// HANDLE FUTURE EVENTS
				for (var i = 0; i < next_button.length; i++) {
						next_button[i].addEventListener('click', function() {
								current_view+=1;
								if (current_view >= 0) {
									next_button[0].style.visibility='hidden';
								}
								else {
									next_button[0].style.visibility='visible';
								}
						});
				}

				scheduler.config.full_day = true;

				scheduler.config.xml_date="%Y-%m-%d %H:%i";

				scheduler.config.default_date = "%j %M %Y";

				var formatDateFunc = scheduler.date.date_to_str("%Y-%m-%dT%H:%i:%s");

				var weekDay = scheduler.date.date_to_str("%D")

				// I think this is where the bug is where the data posting to the view is causing the error for the start and end times
				var updateDayStatus = function(event_id, ev) {

                    start = stringEscape(scheduler.getEvent(event_id).text);

					$('.ajaxProgress').show();
					$.ajax({
						type: "POST",
						url: "create_event/",
						dataType: "json",
						data: {
							csrfmiddlewaretoken: '{{ csrf_token }}',
							start: formatDateFunc(scheduler.getEvent(event_id).start_date),
							end: formatDateFunc(scheduler.getEvent(event_id).end_date),
							text: start,
							id: scheduler.getEvent(event_id).id,
							weekday: weekDay(scheduler.getEvent(event_id).start_date), //what if the event was a multi-day event?!?!
							color: scheduler.getEvent(event_id).color

						},
					});
				};


                var update_event = function(id, ev, color) {
                    event_text = stringEscape(ev.text);
                    if(typeof color === 'undefined'){
                        $('.ajaxProgress').show();
        					$.ajax({
        						type: "POST",
        						url: "update_event/",
        						dataType: "json",
        						data: {
        							csrfmiddlewaretoken: '{{ csrf_token }}',
        							start: formatDateFunc(scheduler.getEvent(id).start_date),
        							end: formatDateFunc(scheduler.getEvent(id).end_date),
        							text: event_text,
        							id: id
        						},
        					});
        		    		return true;
                    }

                    else {

                    $('.ajaxProgress').show();
    					$.ajax({
    						type: "POST",
    						url: "update_event/",
    						dataType: "json",
    						data: {
    							csrfmiddlewaretoken: '{{ csrf_token }}',
    							start: formatDateFunc(scheduler.getEvent(id).start_date),
    							end: formatDateFunc(scheduler.getEvent(id).end_date),
    							text: event_text,
    							id: id,
                                color: color
    						},
    					});
    		    		return true;
                    };
                };


				var deleteEvent = function(event_id, e) {
					$('.ajaxProgress').show();
					$.ajax({
						type: "POST",
						url: "delete_event/",
						dataType: "json",
						data: {
							csrfmiddlewaretoken: '{{ csrf_token }}',
							id: event_id
						},
					});
					return true;
				};

                scheduler.config.icons_select = ['icon_details', 'icon_delete', 'i1', 'i2', 'i3', 'i4', 'i5', 'i6', 'i7', 'i8', 'i9', 'i10', 'i11'];

        		scheduler.locale.labels.i1 = "i_1";
        		scheduler.locale.labels.i2 = "i_2";
        		scheduler.locale.labels.i3 = "i_3";
        		scheduler.locale.labels.i4 = "i_4";
                scheduler.locale.labels.i5 = "i_5";
                scheduler.locale.labels.i6 = "i_6";
                scheduler.locale.labels.i7 = "i_7";
                scheduler.locale.labels.i8 = "i_8";
                scheduler.locale.labels.i9 = "i_9";
                scheduler.locale.labels.i10 = "i_10";
                scheduler.locale.labels.i11 = "i_11";

                scheduler._click.buttons.i1 = function(id){
        			scheduler.getEvent(id).color = "#AEA8D3";
        			scheduler.updateEvent(id);
        			update_event(id, scheduler.getEvent(id), "#AEA8D3");
        			return "";
        		};

                scheduler._click.buttons.i2 = function(id){
        			scheduler.getEvent(id).color = "#87D37C";
        			scheduler.updateEvent(id);
        			update_event(id, scheduler.getEvent(id), "#87D37C");
        			return "";
        		};
                scheduler._click.buttons.i3 = function(id){
        			scheduler.getEvent(id).color = "#BE90D4";
        			scheduler.updateEvent(id);
        			update_event(id, scheduler.getEvent(id), "#BE90D4");
        			return "";
        		};

                scheduler._click.buttons.i4 = function(id){
        			scheduler.getEvent(id).color = "#E26A6A";
        			scheduler.updateEvent(id);
        			update_event(id, scheduler.getEvent(id), "#E26A6A");
        			return "";
        		};
                scheduler._click.buttons.i5 = function(id){
        			scheduler.getEvent(id).color = "#F9BF3B";
        			scheduler.updateEvent(id);
        			update_event(id, scheduler.getEvent(id), "#F9BF3B");
        			return "";
        		};

                scheduler._click.buttons.i6 = function(id){
        			scheduler.getEvent(id).color = "#EB974E";
        			scheduler.updateEvent(id);
        			update_event(id, scheduler.getEvent(id), "#EB974E");
        			return "";
        		};
                scheduler._click.buttons.i7 = function(id){
        			scheduler.getEvent(id).color = "#19B5FE";
        			scheduler.updateEvent(id);
        			update_event(id, scheduler.getEvent(id), "#19B5FE");
        			return "";
        		};

                scheduler._click.buttons.i8 = function(id){
        			scheduler.getEvent(id).color = "#D2D7D3";
        			scheduler.updateEvent(id);
        			update_event(id, scheduler.getEvent(id), "#D2D7D3");
        			return "";
        		};
                scheduler._click.buttons.i9 = function(id){
        			scheduler.getEvent(id).color = "#4B77BE";
        			scheduler.updateEvent(id);
        			update_event(id, scheduler.getEvent(id), "#4B77BE");
        			return "";
        		};

                scheduler._click.buttons.i10 = function(id){
        			scheduler.getEvent(id).color = "#26A65B";
        			scheduler.updateEvent(id);
        			update_event(id, scheduler.getEvent(id), "#26A65B");
        			return "";
        		};
                scheduler._click.buttons.i11 = function(id){
        			scheduler.getEvent(id).color = "#D24D57";
        			scheduler.updateEvent(id);
        			update_event(id, scheduler.getEvent(id), "#D24D57");
        			return "";
        		};

				scheduler.attachEvent("onEventDeleted", deleteEvent);
				scheduler.attachEvent("onClick", readonly_check);
				scheduler.attachEvent("onDblClick", readonly_check);


				// JS event for the onEventAdded function to do an AJAX call to the database for syncing the new event data
				scheduler.attachEvent("onEventAdded", updateDayStatus);

				scheduler.attachEvent("onEventChanged", update_event);

				// Create a new date for gatehring the default times that load into the calendar
				var d = new Date();

				//Get an integer value for getting the full year of the current year in the calendar
				var calendar_year = d.getFullYear();

				//Get the current default month to load into the initial view for the calendar
				var calendar_month = d.getMonth();

				//Get the current day for the calendar to load into the default value for the calendar
				var calendar_day = {{user_day_of_week}};


				scheduler.attachEvent("onBeforeDrag", readonly_check);

				scheduler.config.hour_date = "%g:%i%a";
				// scheduler.config.readonly = true;
				scheduler.init('scheduler_here',new Date(calendar_year,calendar_month,calendar_day),"week");

				scheduler.parse( [
						{% for monday_tasks in mon %}
						{% if monday_tasks.authenticated_user.username == current_user %}
							{
								text: '{{ monday_tasks.task_name }}',
								id: '{{ monday_tasks.special_event_id }}',
								start_date: '{{ monday_tasks.start_time }}'.substring(0, 10)+" "+'{{ monday_tasks.start_time }}'.substring(11, 16),
								end_date: '{{ monday_tasks.end_time }}'.substring(0, 10)+" "+'{{ monday_tasks.end_time }}'.substring(11, 16),
								color: '{{ monday_tasks.color }}'
							},
						{% endif %}
						{% endfor %}
						{% for tuesday_tasks in tues %}
						{% if tuesday_tasks.authenticated_user.username == current_user %}
							{
								text: '{{ tuesday_tasks.task_name }}',
								id: '{{ tuesday_tasks.special_event_id }}',
								start_date: '{{ tuesday_tasks.start_time }}'.substring(0, 10)+" "+'{{ tuesday_tasks.start_time }}'.substring(11, 16),
								end_date: '{{ tuesday_tasks.end_time }}'.substring(0, 10)+" "+'{{ tuesday_tasks.end_time }}'.substring(11, 16),
								color: '{{ tuesday_tasks.color }}'
							},
							{% endif %}
						{% endfor %}
						{% for wednesday_tasks in wed %}
						{% if wednesday_tasks.authenticated_user.username == current_user %}
							{
								text: '{{ wednesday_tasks.task_name }}',
								id: '{{ wednesday_tasks.special_event_id }}',
								start_date: '{{ wednesday_tasks.start_time }}'.substring(0, 10)+" "+'{{ wednesday_tasks.start_time }}'.substring(11, 16),
								end_date: '{{ wednesday_tasks.end_time }}'.substring(0, 10)+" "+'{{ wednesday_tasks.end_time }}'.substring(11, 16),
								color: '{{ wednesday_tasks.color }}'
							},
							{% endif %}
						{% endfor %}
						{% for thursday_tasks in thurs %}
						{% if thursday_tasks.authenticated_user.username == current_user %}
							{
								text: '{{ thursday_tasks.task_name }}',
								id: '{{ thursday_tasks.special_event_id }}',
								start_date: '{{ thursday_tasks.start_time }}'.substring(0, 10)+" "+'{{ thursday_tasks.start_time }}'.substring(11, 16),
								end_date: '{{ thursday_tasks.end_time }}'.substring(0, 10)+" "+'{{ thursday_tasks.end_time }}'.substring(11, 16),
								color: '{{ thursday_tasks.color }}'
							},
							{% endif %}
						{% endfor %}
						{% for friday_tasks in fri %}
						{% if friday_tasks.authenticated_user.username == current_user %}
							{
								text: '{{ friday_tasks.task_name }}',
								id: '{{ friday_tasks.special_event_id }}',
								start_date: '{{ friday_tasks.start_time }}'.substring(0, 10)+" "+'{{ friday_tasks.start_time }}'.substring(11, 16),
								end_date: '{{ friday_tasks.end_time }}'.substring(0, 10)+" "+'{{ friday_tasks.end_time }}'.substring(11, 16),
								color: '{{ friday_tasks.color }}'
							},
							{% endif %}
						{% endfor %}
						{% for saturday_tasks in sat %}
						{% if saturday_tasks.authenticated_user.username == current_user %}
							{
								text: '{{ saturday_tasks.task_name }}',
								id: '{{ saturday_tasks.special_event_id }}',
								start_date: '{{ saturday_tasks.start_time }}'.substring(0, 10)+" "+'{{ saturday_tasks.start_time }}'.substring(11, 16),
								end_date: '{{ saturday_tasks.end_time }}'.substring(0, 10)+" "+'{{ saturday_tasks.end_time }}'.substring(11, 16),
								color: '{{ saturday_tasks.color }}'
							},
							{% endif %}
						{% endfor %}
						{% for sunday_tasks in sun %}
						{% if sunday_tasks.authenticated_user.username == current_user %}
							{
								text: '{{ sunday_tasks.task_name }}',
								id: '{{ sunday_tasks.special_event_id }}',
								start_date: '{{ sunday_tasks.start_time }}'.substring(0, 10)+" "+'{{ sunday_tasks.start_time }}'.substring(11, 16),
								end_date: '{{ sunday_tasks.end_time }}'.substring(0, 10)+" "+'{{ sunday_tasks.end_time }}'.substring(11, 16),
								color: '{{ sunday_tasks.color }}'
							},
							{% endif %}
						{% endfor %}
				], "json");

				//Array to store all the currently gathered google events for the user on the calendar

				//Storing all the google events to enable ability to make read-only
				{% for monday_tasks in mon %}
						{% if monday_tasks.is_google_task %}
							google_ids.push('{{ monday_tasks.special_event_id }}');
						{% endif %}
				{% endfor %}
				{% for tuesday_tasks in tues %}
					{% if tuesday_tasks.is_google_task %}
						google_ids.push('{{ tuesday_tasks.special_event_id }}');
					{% endif %}
				{% endfor %}
				{% for wednesday_tasks in wed %}
					{% if wednesday_tasks.is_google_task %}
						google_ids.push('{{ wednesday_tasks.special_event_id }}');
					{% endif %}
				{% endfor %}
				{% for thursday_tasks in thurs %}
					{% if thursday_tasks.is_google_task %}
						google_ids.push('{{ thursday_tasks.special_event_id }}');
					{% endif %}
				{% endfor %}
				{% for friday_tasks in fri %}
					{% if friday_tasks.is_google_task %}
						google_ids.push('{{ friday_tasks.special_event_id }}');
					{% endif %}
				{% endfor %}
				{% for saturday_tasks in sat %}
					{% if saturday_tasks.is_google_task %}
						google_ids.push('{{ saturday_tasks.special_event_id }}');
					{% endif %}
				{% endfor %}
				{% for sunday_tasks in sun %}
					{% if sunday_tasks.is_google_task %}
						google_ids.push('{{ sunday_tasks.special_event_id }}');
					{% endif %}
				{% endfor %}

				//Function to deal with making google tasks read only
				function readonly_check(id) {

					var found_google_task = false;

					for (i = 0; i < google_ids.length; i++) {
						if (google_ids[i] == id) {
							found_google_task = true;
						}
					}
					if (found_google_task) {
						var readOnly = scheduler.getEvent(id).readonly;
						scheduler.config.drag_move = true;
						scheduler.config.drag_resize = readOnly;
                        open_modal_google(scheduler.getEvent(id).id, scheduler.getEvent(id).color, formatDateFunc(scheduler.getEvent(id).start_date), formatDateFunc(scheduler.getEvent(id).end_date));
						return false;
					}
					else {
						return true;
					}
				}

                // The goal is to open a modal window for the google events
                function modal_check_for_google(id) {

                    for (i = 0; i < google_ids.length; i++) {
						if (google_ids[i] == id) {
							found_google_task = true;
						}
					}
					if (found_google_task) {

                        open_modal_google(scheduler.getEvent(id).id, scheduler.getEvent(id).color);
						return false;
					}
                }
			}

		</script>


		<style type="text/css" media="screen">
			html, body{
				margin:0px;
				padding:0px;
				height:90%;
			}

			.dhx_calendar_click {
				background-color: #C2D5FC !important;
			}

			.pushdown {
				margin-top: 100px;
			}

            @import url(http://fonts.googleapis.com/css?family=Open+Sans:400,700);

            h1 {
              text-align: center;
              font-family: "Open Sans", sans-serif;
              font-size: 22px;
              color: #171717;
              font-weight: 700;
            }
            h1 span {
              font-weight: 400;
            }

            .container {

              min-width: 640px;
              display: -webkit-box;
              display: -webkit-flex;
              display: -ms-flexbox;
              display: flex;
              -webkit-box-orient: vertical;
              -webkit-box-direction: normal;
              -webkit-flex-direction: column;
                  -ms-flex-direction: column;
                      flex-direction: column;
            }
            .button-container {
              display: -webkit-box;
              display: -webkit-flex;
              display: -ms-flexbox;
              display: flex;
              -webkit-box-pack: justify;
              -webkit-justify-content: space-between;
                  -ms-flex-pack: justify;
                      justify-content: space-between;
              margin: 60px auto;
            }

            .button {
              border: 0 none;
              border-radius: 36px;
              padding: 5px 55px;
              margin: 0 10px;
              cursor: pointer;
              display: inline-block;
              font-size: 14px;
              color: #fff;
              text-transform: none;
              -webkit-transition: all 80ms ease-in-out;
              transition: all 80ms ease-in-out;
            }
            .button:hover {
              opacity: .7;
            }

            .button.-dark {
              background: #171717;
              color: #FFFFFF;
            }

            .button.-green {
              background: #3AB54A;
              color: #FFFFFF;
            }

            .button.-blue {
              background: #2C96BE;
              color: #FFFFFF;
            }

            .button.-border {
              background: transparent;
              border: 2px solid #2C96BE;
              color: #2C96BE;
            }
            .button.-border:hover {
              border-color: #2C96BE;
              color: #2C96BE;
              opacity: 1;
            }

            #margin-paragraph-from-right {
                margin-right: 20px;
            }
		</style>
        <style>

            .footer{
                position: absolute;
                left: 0;
                bottom: 0;
                height: 60px;
                width: 100%;
                overflow:hidden;
            }



            /* Paste this css to your style sheet file or under head tag */
            /* This only works with JavaScript,
            if it's not present, don't show loader */
            .no-js #loader { display: none;  }
            .js #loader { display: block; position: absolute; left: 100px; top: 0; }
            .se-pre-con {
            	position: fixed;
            	left: 0px;
            	top: 0px;
            	width: 100%;
            	height: 100%;
            	z-index: 9999;
            	background: url(http://i2.wp.com/smallenvelop.com/wp-content/uploads/2014/08/Preloader_3.gif?zoom=2&resize=64%2C64) center no-repeat #fff;
            }


            #header_text{
                margin-top: 40px;
                font-family: 'Comfortaa', cursive;
                color: #444444;
            }




        </style>

            <link href='https://fonts.googleapis.com/css?family=Comfortaa:700' rel='stylesheet' type='text/css'>
        <script>

        //paste this code under head tag or in a seperate js file.
        	// Wait for window load
        	$(window).load(function() {
        		// Animate loader off screen
        		$(".se-pre-con").fadeOut("slow");;
        	});

        </script>
</head>
<body onload="init();">

<div class="wrapper">
    <div class="sidebar" data-color="azure" data-image="{% static 'img/DASHBOARD_IMAGES/sidebar-4.jpg' %}">


    	<div class="sidebar-wrapper">
            <div class="logo">
                <a href="/dashboard" class="simple-text">
                    Architasker
                    <h6>Welcome back, {{first_name}}!</h6>
                </a>
            </div>



            <ul class="nav">
                <li class="active">
                    <a href="/dashboard">
                        <i class="pe-7s-news-paper"></i>
                        <p>Dashboard</p>
                    </a>
                </li>

                <li>
                    <a href="/dashboard">
                        <i class="pe-7s-plus"></i>
                        <p>Add Task</p>
                    </a>
                </li>

                <li>
                    <a href="/settings">
                        <i class="pe-7s-user"></i>
                        <p>Your Account</p>
                    </a>
                </li>


                <li>
                    <a href="#">
                        <i class="pe-7s-bell"></i>
                        <p>Notifications</p>
                    </a>
                </li>



                <li>
                    <a href="#">
                        <i class="pe-7s-help1"></i>
                        <p>Help &amp; Information</p>
                    </a>
                </li>





            </ul>
    	</div>
    </div>

    <div class="main-panel">
        <nav class="navbar navbar-default navbar-fixed">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navigation-example-2">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="#">Dashboard</a>
                </div>
                <div class="collapse navbar-collapse">
                    <ul class="nav navbar-nav navbar-left">
                        <li>
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <i class="fa fa-dashboard"></i>
                            </a>
                        </li>
                        <!-- <li class="dropdown">
                              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                    <i class="fa fa-globe"></i>
                                    <b class="caret"></b>
                                    <span class="notification">5</span>
                              </a>
                              <ul class="dropdown-menu">
                                <li><a href="#">Notification 1</a></li>
                                <li><a href="#">Notification 2</a></li>
                                <li><a href="#">Notification 3</a></li>
                                <li><a href="#">Notification 4</a></li>
                                <li><a href="#">Another notification</a></li>
                              </ul>
                        </li> -->
                        <!-- <li>
                           <a href="">
                                <i class="fa fa-search"></i>
                            </a>
                        </li> -->
                    </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                           <a href="">
                               Account
                            </a>
                        </li>
                        <!-- <li class="dropdown">
                              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                    Dropdown
                                    <b class="caret"></b>
                              </a>
                              <ul class="dropdown-menu">
                                <li><a href="#">Action</a></li>
                                <li><a href="#">Another action</a></li>
                                <li><a href="#">Something</a></li>
                                <li><a href="#">Another action</a></li>
                                <li><a href="#">Something</a></li>
                                <li class="divider"></li>
                                <li><a href="#">Separated link</a></li>
                              </ul>
                        </li> -->
                        <li>
                            <a href="/logout">
                                Log out
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>


				{% if user_initial_setup == True %}


				<center><h3 class="title" id="header_text">{{first_name | title}} {{last_name | title}}'s Weekly To-Do</h3></center>

                {% if google_auth_complete == True %}

                <a href="/sync">
                    <div class='button -border center' style="float: right;">Sync Google Calendar</div>
                </a>

                {% else %}
                <p align="right" id="margin-paragraph-from-right"><a href="/oauth" style="text-align: right">Want To Sync With Google Calendar? Click Here</a></p>
                {% endif %}


				<div id="scheduler_here" class="dhx_cal_container card col-md-12" style='width:100%; height:70%'>

					 <div class="dhx_cal_navline">
							<div class="dhx_cal_prev_button">&nbsp;</div>
							<div class="dhx_cal_next_button">&nbsp;</div>
							<div class="dhx_cal_today_button"></div>
							<div class="dhx_cal_date"></div>
							<div class="dhx_cal_tab" name="day_tab" style="right:204px;"></div>
							<div class="dhx_cal_tab rounding_week_tab" name="week_tab" style="right:140px; border-top-right-radius: 5px; border-bottom-right-radius: 5px;"></div>
					 </div>
					 <div class="dhx_cal_header">
					 </div>
					 <div class="dhx_cal_data pushdown">
					 </div>
				</div>


				{% else %}


				<iframe id="encoder_iframe" height=75% width="100%" src="{% url 'screen_setup_module' %}"></iframe>

				{% endif %}

        <footer class="footer">
            <div class="container-fluid">
                <nav class="pull-left">
                    <ul>
                        <li>
                            <a href="#">
                                Home
                            </a>
                        </li>
                        <li>
                            <a href="https://architasker.wordpress.com/">
                               Blog
                            </a>
                        </li>
                    </ul>
                </nav>
                <p class="copyright pull-right">
                    &copy; 2015 <a href="http://www.creative-tim.com">Architasker</a>, made with love for a better scheduler
                </p>
            </div>
        </footer>

    </div>
</div>
<div class="modal fade" id = "mymodal">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
        <h4 class="modal-title" id="modal_title">Google Event Name: </h4>
      </div>
      <div class="modal-body">
         <p id="start_time"></p>
         <p id="end_time"></p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->


</body>
<div class="se-pre-con"></div>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha256-KXn5puMvxCw+dAYznun+drMdG1IFl3agK0p/pqT9KAo= sha512-2e8qq0ETcfWRI4HJBzQiA3UoyFk6tbNyG+qSaIBZLyW9Xf3sWZHN/lxe9fTh1U45DpPf07yj94KsUHHWe4Yk1A==" crossorigin="anonymous"></script>

<!--   Core JS Files   -->
<script src="{% static 'js/DASHBOARD_JAVASCRIPT/jquery-1.10.2.js'%}" type="text/javascript"></script>
<script src="{% static 'js/DASHBOARD_JAVASCRIPT/bootstrap.min.js' %}" type="text/javascript"></script>

<!--  Checkbox, Radio & Switch Plugins -->
<script src="{% static 'js/DASHBOARD_JAVASCRIPT/bootstrap-checkbox-radio-switch.js' %}"></script>

<!--  Charts Plugin -->
<script src="{% static 'js/DASHBOARD_JAVASCRIPT/chartist.min.js' %}"></script>

<!--  Notifications Plugin    -->
<script src="{% static 'js/DASHBOARD_JAVASCRIPT/bootstrap-notify.js' %}"></script>

  <!-- Light Bootstrap Table Core javascript and methods for Demo purpose -->
<script src="{% static 'js/DASHBOARD_JAVASCRIPT/light-bootstrap-dashboard.js' %}"></script>

<!-- Light Bootstrap Table DEMO methods, don't include it in your project! -->
<script src="{% static 'js/DASHBOARD_JAVASCRIPT/demo.js' %}"></script>

	<script type="text/javascript">
			{% if user_initial_setup == False %}
    	$(document).ready(function(){
        	$.notify({
            	icon: 'pe-7s-bell',
            	message: "Welcome to Architasker! Get started by setting up your account so we can begin adding tasks."

            },{
                type: 'info',
                timer: -1
            });
    	});

        {% if google_auth_complete %}

        setTimeout(function(){  }, 500);
            //If the user has already authorize timezone and OAUTH2
            $('#encoder_iframe').load(function(){

                    //Grab the inner iFrame
                    var iframe = $('#encoder_iframe').contents();

                    //Click the initial next button
                    iframe.find("#next").click();

                    //Set timeout for load and then next again for the final set
                    setTimeout(function(){ iframe.find("#next_again").click(); }, 1000);

            });

        {% endif %}


		{% endif %}

	</script>

</html>
