{% load staticfiles %}
{% load static %}

<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8' />
{% include 'css.html' %}
{% include 'javascript.html' %}

<script type="text/javascript" charset="utf-8">
	function init() {
		scheduler.config.multi_day = true;

		// Return today's date and time
		var currentTime = new Date();

		// returns the month (from 0 to 11)
		var month = currentTime.getMonth() + 1;

		// returns the day of the month (from 1 to 31)
		var day = currentTime.getDate();

		// returns the year (four digits)
		var year = currentTime.getFullYear();

		print(new Date().getFullYear());


		scheduler.config.xml_date="%Y-%m-%d %H:%i";
		scheduler.config.default_date = "%j %M %Y";
		scheduler.init('scheduler_here',new Date(year,0,month),"week");
		// scheduler.load("./data/events.xml");
		scheduler.addEvent("16-12-2015 09:00","16-12-2015 12:00","Meeting", {holder:"John"})
	}

	function show_minical(){
		if (scheduler.isCalendarVisible())
			scheduler.destroyCalendar();
		else
			scheduler.renderCalendar({
				position:"dhx_minical_icon",
				date:scheduler._date,
				navigation:true,
				handler:function(date,calendar){
					scheduler.setCurrentView(date);
					scheduler.destroyCalendar()
				}
			});
	}



</script>


<style type="text/css" media="screen">
	html, body{
		margin:0px;
		padding:0px;
		height:100%;
		overflow: hidden;
	}

	.dhx_calendar_click {
		background-color: #C2D5FC !important;
	}
</style>

</head>
<body onload="init();">


	{% if user_is_authenticated == True %}

		{% if event_length > 0 %}

		   <div id="scheduler_here" class="dhx_cal_container" style='width:100%; height:100%;'>
		      <div class="dhx_cal_navline">
		         <div class="dhx_cal_prev_button">&nbsp;</div>
		         <div class="dhx_cal_next_button">&nbsp;</div>
		         <div class="dhx_cal_today_button"></div>
		         <div class="dhx_cal_date"></div>
		         <div class="dhx_minical_icon" id="dhx_minical_icon" onclick="show_minical()">&nbsp;</div>
		         <div class="dhx_cal_tab" name="day_tab" style="right:204px;"></div>
		         <div class="dhx_cal_tab" name="week_tab" style="right:140px;"></div>
		         <div class="dhx_cal_tab" name="month_tab" style="right:76px;"></div>
		      </div>
		      <div class="dhx_cal_header">
		      </div>
		      <div class="dhx_cal_data">
		      </div>
		   </div>


				<form action="/sync" method="get">
					{% csrf_token %}
				<input type="submit" value="Sync Google Calendar" class="btn waves-effect waves-light pink darken-1">
				</form>


		{% else %}
		<h1>YOU HAVE NO EVENTS</h1>

		<form action="/sync" method="get">
			{% csrf_token %}
		<input type="submit" value="Sync Google Calendar">
		</form>

		{% endif %}

		{% else %}

			<img src="https://c2.staticflickr.com/2/1202/1399604858_8bd193e59c.jpg">
			<h1> You're not authenticated....</h1>
			<a href="/oauth">Click Here to authenticate via OAUTH</a>



		{% endif %}


</body>
</html>
